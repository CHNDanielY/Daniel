
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
<title>Pull to Refresh</title>
<meta name="viewport" content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;" />
<style>
        html{  
            background: #fff;  
        }  
        body{  
            width: 800px;  
            height:800px;  
            /*margin: 0 auto;  */
            background: green;  
        }  

.div1{
width:200px;
height: 200px;
/*border:1px solid #000;padding:20px;*/
position:relative;
}
.div1:after{
    content:'';
    display: block;
    border:1px solid #000;
    transform:scale(0.5);
    position:absolute;
    bottom:-50%;
    top:-50%;
    left:-50%;
    right:-50%;
}
.div2{
    margin-right:10px;
    width:100%;
    height:100px;
    position:absolute;
    background-color: blue;
}
</style>
</head>
<body>

<div class="div1">
    <div class="div2"></div>
</div>
<script>
   var scroll = document.querySelector('.scroll');
   var outerScroller = document.querySelector('.outerScroller');
   var touchStart = 0;
   var touchDis = 0;
   outerScroller.addEventListener('touchstart', function(event) { 
        var touch = event.targetTouches[0]; 
        // 把元素放在手指所在的位置 
           touchStart = touch.pageY; 
           console.log(touchStart);
        }, false);
   outerScroller.addEventListener('touchmove', function(event) { 
        var touch = event.targetTouches[0]; 
        console.log(touch.pageY + 'px');  
        scroll.style.top = scroll.offsetTop + touch.pageY-touchStart + 'px';
        console.log(scroll.style.top);
        touchStart = touch.pageY;
        touchDis = touch.pageY-touchStart;
        }, false);
   outerScroller.addEventListener('touchend', function(event) { 
        touchStart = 0;
        var top = scroll.offsetTop;
        console.log(top);
        if(top>70)refresh();
        if(top>0){
            var time = setInterval(function(){
              scroll.style.top = scroll.offsetTop -2+'px';
              if(scroll.offsetTop<=0)clearInterval(time);
            },1)
        }
    }, false);
   function refresh(){
    for(var i = 10;i>0;i--)
        {
            var node = document.createElement("li");
            node.innerHTML = "I'm new";
            scroll.insertBefore(node,scroll.firstChild);
        }
   }
</script>
</body>
</html>
